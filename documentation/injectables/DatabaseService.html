<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>tarea-duoc documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">tarea-duoc documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >DatabaseService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/database.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Servicio que maneja todas las operaciones de la base de datos usando SQL.js</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#citas$" >citas$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#citasSubject" >citasSubject</a>
                            </li>
                            <li>
                                <a href="#cupos$" >cupos$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#cuposSubject" >cuposSubject</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#db" >db</a>
                            </li>
                            <li>
                                <a href="#especialidades$" >especialidades$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#especialidadesSubject" >especialidadesSubject</a>
                            </li>
                            <li>
                                <a href="#funcionarios$" >funcionarios$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#funcionariosSubject" >funcionariosSubject</a>
                            </li>
                            <li>
                                <a href="#nuevosPacientes" >nuevosPacientes</a>
                            </li>
                            <li>
                                <a href="#pacientes$" >pacientes$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#pacientesSubject" >pacientesSubject</a>
                            </li>
                            <li>
                                <a href="#roles$" >roles$</a>
                            </li>
                            <li>
                                <a href="#rolesFuncionario$" >rolesFuncionario$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#rolesFuncionarioSubject" >rolesFuncionarioSubject</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#rolesSubject" >rolesSubject</a>
                            </li>
                            <li>
                                <a href="#segmentosHorario$" >segmentosHorario$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#segmentosHorarioSubject" >segmentosHorarioSubject</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addFuncionario" >addFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addPaciente" >addPaciente</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addSegmentoHorario" >addSegmentoHorario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#assignRolToFuncionario" >assignRolToFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#assignSegmentoToPaciente" >assignSegmentoToPaciente</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteFuncionario" >deleteFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#deleteSegmentoHorario" >deleteSegmentoHorario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getEspecialidadByName" >getEspecialidadByName</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFuncionarioByEmail" >getFuncionarioByEmail</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFuncionarioById" >getFuncionarioById</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFuncionarioByName" >getFuncionarioByName</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFuncionarioByRut" >getFuncionarioByRut</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFuncionarioRoles" >getFuncionarioRoles</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getPacienteByRut" >getPacienteByRut</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getSegmentoHorarioById" >getSegmentoHorarioById</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getSegmentosHorarioByFuncionarioId" >getSegmentosHorarioByFuncionarioId</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasRole" >hasRole</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#initializeDatabase" >initializeDatabase</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadCitas" >loadCitas</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadCupos" >loadCupos</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadEspecialidades" >loadEspecialidades</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadFuncionarios" >loadFuncionarios</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadPacientes" >loadPacientes</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadRoles" >loadRoles</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadRolesFuncionario" >loadRolesFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadSegmentosHorario" >loadSegmentosHorario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#removeRolFromFuncionario" >removeRolFromFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#seedDatabase" >seedDatabase</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#seedRoles" >seedRoles</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#tryLogin" >tryLogin</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateFuncionario" >updateFuncionario</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateFuncionarioPassword" >updateFuncionarioPassword</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateSegmentoHorario" >updateSegmentoHorario</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>addFuncionario</b></span>
                        <a href="#addFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addFuncionario(funcionario: <a href="../interfaces/Funcionario.html" target="_self">Funcionario</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="400"
                                    class="link-to-prism">src/app/services/database.service.ts:400</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Agrega un nuevo funcionario a la base de datos</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>funcionario</td>
                                            <td>
                                                            <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Objeto funcionario a agregar</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addPaciente"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>addPaciente</b></span>
                        <a href="#addPaciente"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addPaciente(paciente: <a href="../interfaces/Paciente.html" target="_self">Paciente</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="435"
                                    class="link-to-prism">src/app/services/database.service.ts:435</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>paciente</td>
                                            <td>
                                                            <code><a href="../interfaces/Paciente.html" target="_self" >Paciente</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addSegmentoHorario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>addSegmentoHorario</b></span>
                        <a href="#addSegmentoHorario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addSegmentoHorario(segmentoHorario: <a href="../interfaces/SegmentoHorario.html" target="_self">SegmentoHorario</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="508"
                                    class="link-to-prism">src/app/services/database.service.ts:508</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>segmentoHorario</td>
                                            <td>
                                                            <code><a href="../interfaces/SegmentoHorario.html" target="_self" >SegmentoHorario</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="assignRolToFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>assignRolToFuncionario</b></span>
                        <a href="#assignRolToFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>assignRolToFuncionario(rolId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, funId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="600"
                                    class="link-to-prism">src/app/services/database.service.ts:600</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rolId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>funId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="assignSegmentoToPaciente"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>assignSegmentoToPaciente</b></span>
                        <a href="#assignSegmentoToPaciente"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>assignSegmentoToPaciente(pacId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, sghId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="674"
                                    class="link-to-prism">src/app/services/database.service.ts:674</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Asigna un segmento horario a un paciente</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>pacId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>ID del paciente</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>sghId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>ID del segmento horario</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>deleteFuncionario</b></span>
                        <a href="#deleteFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteFuncionario(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="595"
                                    class="link-to-prism">src/app/services/database.service.ts:595</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteSegmentoHorario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>deleteSegmentoHorario</b></span>
                        <a href="#deleteSegmentoHorario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteSegmentoHorario(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="534"
                                    class="link-to-prism">src/app/services/database.service.ts:534</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEspecialidadByName"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getEspecialidadByName</b></span>
                        <a href="#getEspecialidadByName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getEspecialidadByName(nombre: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="688"
                                    class="link-to-prism">src/app/services/database.service.ts:688</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>nombre</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Especialidad.html" target="_self" >Especialidad | null</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFuncionarioByEmail"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getFuncionarioByEmail</b></span>
                        <a href="#getFuncionarioByEmail"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFuncionarioByEmail(email: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="385"
                                    class="link-to-prism">src/app/services/database.service.ts:385</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>email</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario | null</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFuncionarioById"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getFuncionarioById</b></span>
                        <a href="#getFuncionarioById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFuncionarioById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="372"
                                    class="link-to-prism">src/app/services/database.service.ts:372</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario | null</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFuncionarioByName"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getFuncionarioByName</b></span>
                        <a href="#getFuncionarioByName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFuncionarioByName(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="363"
                                    class="link-to-prism">src/app/services/database.service.ts:363</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario | null</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFuncionarioByRut"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getFuncionarioByRut</b></span>
                        <a href="#getFuncionarioByRut"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFuncionarioByRut(rut: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="649"
                                    class="link-to-prism">src/app/services/database.service.ts:649</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene un funcionario por su RUT</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rut</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>RUT del funcionario (sin puntos ni guin)</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario | null</a></code>

                        </div>
                            <div class="io-description">
                                <p>Funcionario si se encuentra, null si no existe</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFuncionarioRoles"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getFuncionarioRoles</b></span>
                        <a href="#getFuncionarioRoles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFuncionarioRoles(funId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="616"
                                    class="link-to-prism">src/app/services/database.service.ts:616</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>funId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>string[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPacienteByRut"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getPacienteByRut</b></span>
                        <a href="#getPacienteByRut"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPacienteByRut(rut: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="484"
                                    class="link-to-prism">src/app/services/database.service.ts:484</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene un paciente por su RUT</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rut</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>RUT del paciente (sin puntos ni guin)</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Paciente.html" target="_self" >Paciente | null</a></code>

                        </div>
                            <div class="io-description">
                                <p>Paciente si se encuentra, null si no existe</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSegmentoHorarioById"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getSegmentoHorarioById</b></span>
                        <a href="#getSegmentoHorarioById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getSegmentoHorarioById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="539"
                                    class="link-to-prism">src/app/services/database.service.ts:539</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/SegmentoHorario.html" target="_self" >SegmentoHorario | null</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSegmentosHorarioByFuncionarioId"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getSegmentosHorarioByFuncionarioId</b></span>
                        <a href="#getSegmentosHorarioByFuncionarioId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getSegmentosHorarioByFuncionarioId(funcionarioId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="522"
                                    class="link-to-prism">src/app/services/database.service.ts:522</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>funcionarioId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/SegmentoHorario.html" target="_self" >SegmentoHorario[]</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasRole"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>hasRole</b></span>
                        <a href="#hasRole"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasRole(funId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, rolNombre: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="633"
                                    class="link-to-prism">src/app/services/database.service.ts:633</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Verifica si un funcionario tiene un rol especfico</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>funId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>ID del funcionario</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>rolNombre</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Nombre del rol a verificar</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                            <div class="io-description">
                                <p>boolean indicando si el funcionario tiene el rol</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initializeDatabase"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>initializeDatabase</b></span>
                        <a href="#initializeDatabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initializeDatabase()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="50"
                                    class="link-to-prism">src/app/services/database.service.ts:50</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Inicializa la base de datos SQLite y crea todas las tablas necesarias</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>Promise<void></p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadCitas"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadCitas</b></span>
                        <a href="#loadCitas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadCitas()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="327"
                                    class="link-to-prism">src/app/services/database.service.ts:327</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadCupos"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadCupos</b></span>
                        <a href="#loadCupos"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadCupos()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="317"
                                    class="link-to-prism">src/app/services/database.service.ts:317</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadEspecialidades"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadEspecialidades</b></span>
                        <a href="#loadEspecialidades"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadEspecialidades()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="256"
                                    class="link-to-prism">src/app/services/database.service.ts:256</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Carga todas las especialidades desde la base de datos</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadFuncionarios"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadFuncionarios</b></span>
                        <a href="#loadFuncionarios"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadFuncionarios()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="268"
                                    class="link-to-prism">src/app/services/database.service.ts:268</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadPacientes"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadPacientes</b></span>
                        <a href="#loadPacientes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadPacientes()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="287"
                                    class="link-to-prism">src/app/services/database.service.ts:287</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadRoles"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadRoles</b></span>
                        <a href="#loadRoles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadRoles()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="338"
                                    class="link-to-prism">src/app/services/database.service.ts:338</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadRolesFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadRolesFuncionario</b></span>
                        <a href="#loadRolesFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadRolesFuncionario()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="348"
                                    class="link-to-prism">src/app/services/database.service.ts:348</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadSegmentosHorario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>loadSegmentosHorario</b></span>
                        <a href="#loadSegmentosHorario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadSegmentosHorario()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="307"
                                    class="link-to-prism">src/app/services/database.service.ts:307</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeRolFromFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>removeRolFromFuncionario</b></span>
                        <a href="#removeRolFromFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeRolFromFuncionario(rolId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, funId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="608"
                                    class="link-to-prism">src/app/services/database.service.ts:608</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rolId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>funId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="seedDatabase"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>seedDatabase</b></span>
                        <a href="#seedDatabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>seedDatabase()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="166"
                                    class="link-to-prism">src/app/services/database.service.ts:166</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Inicializa los roles por defecto en la base de datos</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="seedRoles"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>seedRoles</b></span>
                        <a href="#seedRoles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>seedRoles()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="229"
                                    class="link-to-prism">src/app/services/database.service.ts:229</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Inicializa los roles por defecto en la base de datos</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tryLogin"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>tryLogin</b></span>
                        <a href="#tryLogin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>tryLogin(email: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, password: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="358"
                                    class="link-to-prism">src/app/services/database.service.ts:358</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>email</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>password</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateFuncionario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>updateFuncionario</b></span>
                        <a href="#updateFuncionario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateFuncionario(funcionario: <a href="../interfaces/Funcionario.html" target="_self">Funcionario</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="696"
                                    class="link-to-prism">src/app/services/database.service.ts:696</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>funcionario</td>
                                            <td>
                                                            <code><a href="../interfaces/Funcionario.html" target="_self" >Funcionario</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateFuncionarioPassword"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>updateFuncionarioPassword</b></span>
                        <a href="#updateFuncionarioPassword"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateFuncionarioPassword(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, newPassword: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="681"
                                    class="link-to-prism">src/app/services/database.service.ts:681</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newPassword</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateSegmentoHorario"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>updateSegmentoHorario</b></span>
                        <a href="#updateSegmentoHorario"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateSegmentoHorario(segmentoHorario: <a href="../interfaces/SegmentoHorario.html" target="_self">SegmentoHorario</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="555"
                                    class="link-to-prism">src/app/services/database.service.ts:555</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>segmentoHorario</td>
                                            <td>
                                                            <code><a href="../interfaces/SegmentoHorario.html" target="_self" >SegmentoHorario</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="citas$"></a>
                    <span class="name">
                        <span ><b>citas$</b></span>
                        <a href="#citas$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.citasSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/services/database.service.ts:41</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="citasSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>citasSubject</b></span>
                        <a href="#citasSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Cita[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/services/database.service.ts:28</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cupos$"></a>
                    <span class="name">
                        <span ><b>cupos$</b></span>
                        <a href="#cupos$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.cuposSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/services/database.service.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cuposSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>cuposSubject</b></span>
                        <a href="#cuposSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Cupo[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/services/database.service.ts:27</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="db"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>db</b></span>
                        <a href="#db"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/services/database.service.ts:17</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Base de datos SQLite</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="especialidades$"></a>
                    <span class="name">
                        <span ><b>especialidades$</b></span>
                        <a href="#especialidades$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.especialidadesSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/services/database.service.ts:36</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Streams observables pblicos</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="especialidadesSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>especialidadesSubject</b></span>
                        <a href="#especialidadesSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Especialidad[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/services/database.service.ts:23</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Observables para los diferentes tipos de datos</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="funcionarios$"></a>
                    <span class="name">
                        <span ><b>funcionarios$</b></span>
                        <a href="#funcionarios$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.funcionariosSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/services/database.service.ts:37</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="funcionariosSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>funcionariosSubject</b></span>
                        <a href="#funcionariosSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Funcionario[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/app/services/database.service.ts:24</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="nuevosPacientes"></a>
                    <span class="name">
                        <span ><b>nuevosPacientes</b></span>
                        <a href="#nuevosPacientes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Paciente.html" target="_self" >Paciente[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="434" class="link-to-prism">src/app/services/database.service.ts:434</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pacientes$"></a>
                    <span class="name">
                        <span ><b>pacientes$</b></span>
                        <a href="#pacientes$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.pacientesSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/services/database.service.ts:38</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pacientesSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>pacientesSubject</b></span>
                        <a href="#pacientesSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Paciente[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/services/database.service.ts:25</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="roles$"></a>
                    <span class="name">
                        <span ><b>roles$</b></span>
                        <a href="#roles$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.rolesSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/services/database.service.ts:42</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rolesFuncionario$"></a>
                    <span class="name">
                        <span ><b>rolesFuncionario$</b></span>
                        <a href="#rolesFuncionario$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.rolesFuncionarioSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/app/services/database.service.ts:43</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rolesFuncionarioSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>rolesFuncionarioSubject</b></span>
                        <a href="#rolesFuncionarioSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;RolFuncionario[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/services/database.service.ts:30</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rolesSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>rolesSubject</b></span>
                        <a href="#rolesSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Rol[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/services/database.service.ts:29</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="segmentosHorario$"></a>
                    <span class="name">
                        <span ><b>segmentosHorario$</b></span>
                        <a href="#segmentosHorario$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.segmentosHorarioSubject.asObservable()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/services/database.service.ts:39</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="segmentosHorarioSubject"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>segmentosHorarioSubject</b></span>
                        <a href="#segmentosHorarioSubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;SegmentoHorario[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/services/database.service.ts:26</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import initSqlJs from &#x27;sql.js&#x27;;
import { BehaviorSubject, Observable } from &#x27;rxjs&#x27;;

/**
 * Servicio que maneja todas las operaciones de la base de datos usando SQL.js
 * @description Este servicio gestiona las operaciones de la base de datos SQLite para la aplicacin Hospital Scheduler
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class DatabaseService {
  /**
   * Base de datos SQLite
   * @private
   */
  private db: any;

  /**
   * Observables para los diferentes tipos de datos
   * @description Utilizan BehaviorSubject para mantener el ltimo valor emitido
   */
  private especialidadesSubject &#x3D; new BehaviorSubject&lt;Especialidad[]&gt;([]);
  private funcionariosSubject &#x3D; new BehaviorSubject&lt;Funcionario[]&gt;([]);
  private pacientesSubject &#x3D; new BehaviorSubject&lt;Paciente[]&gt;([]);
  private segmentosHorarioSubject &#x3D; new BehaviorSubject&lt;SegmentoHorario[]&gt;([]);
  private cuposSubject &#x3D; new BehaviorSubject&lt;Cupo[]&gt;([]);
  private citasSubject &#x3D; new BehaviorSubject&lt;Cita[]&gt;([]);
  private rolesSubject &#x3D; new BehaviorSubject&lt;Rol[]&gt;([]);
  private rolesFuncionarioSubject &#x3D; new BehaviorSubject&lt;RolFuncionario[]&gt;([]);

  /**
   * Streams observables pblicos
   * @description Exponen los datos a los componentes
   */
  especialidades$ &#x3D; this.especialidadesSubject.asObservable();
  funcionarios$ &#x3D; this.funcionariosSubject.asObservable();
  pacientes$ &#x3D; this.pacientesSubject.asObservable();
  segmentosHorario$ &#x3D; this.segmentosHorarioSubject.asObservable();
  cupos$ &#x3D; this.cuposSubject.asObservable();
  citas$ &#x3D; this.citasSubject.asObservable();
  roles$ &#x3D; this.rolesSubject.asObservable();
  rolesFuncionario$ &#x3D; this.rolesFuncionarioSubject.asObservable();

  /**
   * Inicializa la base de datos SQLite y crea todas las tablas necesarias
   * @returns Promise&lt;void&gt;
   * @throws Error si la inicializacin de la base de datos falla
   */
  async initializeDatabase(): Promise&lt;void&gt; {
    console.log(&quot;### initializeDatabase&quot;);
    try {
      const SQL &#x3D; await initSqlJs({
        locateFile: file &#x3D;&gt; &#x60;https://sql.js.org/dist/${file}&#x60;
      });
      
      this.db &#x3D; new SQL.Database();
      
      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS ESP_ESPECIALIDAD (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          nombre TEXT NOT NULL
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS FUN_FUNCIONARIO (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          nombres TEXT NOT NULL,
          apellidos TEXT NOT NULL,
          rut TEXT NOT NULL,
          telefono TEXT NOT NULL,
          email TEXT NOT NULL,
          password TEXT NOT NULL,
          esp_id INTEGER,
          FOREIGN KEY (esp_id) REFERENCES ESP_ESPECIALIDAD(id)
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS PAC_PACIENTE (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          nombres TEXT NOT NULL,
          apellidos TEXT NOT NULL,
          rut TEXT NOT NULL,
          telefono TEXT NOT NULL,
          email TEXT NOT NULL,
          fecha_nacimiento TEXT NOT NULL,
          genero TEXT NOT NULL,
          direccion TEXT NOT NULL
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS SGH_SEGMENTO_HORARIO (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          nombre TEXT NOT NULL,
          fecha_hora_inicio TEXT NOT NULL,
          fecha_hora_fin TEXT NOT NULL,
          fun_id INTEGER,
          free BOOLEAN NOT NULL,
          FOREIGN KEY (fun_id) REFERENCES FUN_FUNCIONARIO(id)
        )
      &#x60;);

      // Estados: 0: Disponible, 1: Ocupado
      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS CUP_CUPO (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          estado TEXT NOT NULL,
          fecha_hora_inicio TEXT NOT NULL,
          fecha_hora_fin TEXT NOT NULL,
          duracion INTEGER NOT NULL,
          sgh_id INTEGER,
          FOREIGN KEY (sgh_id) REFERENCES SGH_SEGMENTO_HORARIO(id)
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS CIT_CITA (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          cup_id INTEGER,
          pac_id INTEGER,
          FOREIGN KEY (cup_id) REFERENCES CUP_CUPO(id),
          FOREIGN KEY (pac_id) REFERENCES PAC_PACIENTE(id)
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS ROL_ROLES (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          nombre TEXT NOT NULL UNIQUE
        )
      &#x60;);

      this.db.run(&#x60;
        CREATE TABLE IF NOT EXISTS RL_ROL_FUN (
          rol_id INTEGER,
          fun_id INTEGER,
          PRIMARY KEY (rol_id, fun_id),
          FOREIGN KEY (rol_id) REFERENCES ROL_ROLES(id),
          FOREIGN KEY (fun_id) REFERENCES FUN_FUNCIONARIO(id)
        )
      &#x60;);

      this.seedDatabase();
      this.loadEspecialidades();
      this.loadFuncionarios();
      this.loadPacientes();
      this.loadSegmentosHorario();
      this.loadCupos();
      this.loadCitas();
      this.seedRoles();
      this.loadRoles();
      this.loadRolesFuncionario();
    } catch (err) {
      throw new Error(&#x27;Failed to initialize database&#x27;);
    }
  }

  /**
   * Inicializa los roles por defecto en la base de datos
   * @description Crea los roles: USA_CITAS, USA_AGENDA, USA_INSCRIPCION
   * @private
   */
  private async seedDatabase(): Promise&lt;void&gt; {
    console.log(&quot;### THIS IS BEING RUN&quot;);
    const script &#x3D; &#x60;
INSERT INTO ESP_ESPECIALIDAD (nombre) VALUES (&#x27;Cardiologa&#x27;);
INSERT INTO ESP_ESPECIALIDAD (nombre) VALUES (&#x27;Neurologa&#x27;);
INSERT INTO ESP_ESPECIALIDAD (nombre) VALUES (&#x27;Pediatra&#x27;);
INSERT INTO ESP_ESPECIALIDAD (nombre) VALUES (&#x27;Dermatologa&#x27;);
INSERT INTO ESP_ESPECIALIDAD (nombre) VALUES (&#x27;Oncologa&#x27;);

INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;196450963&#x27;, &#x27;Mara&#x27;, &#x27;Gonzlez&#x27;, &#x27;555-1001&#x27;, &#x27;maria.gonzalez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 1);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;13538951k&#x27;, &#x27;Jos&#x27;, &#x27;Rodrguez&#x27;, &#x27;555-1002&#x27;, &#x27;jose.rodriguez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 2);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;145092035&#x27;, &#x27;Carmen&#x27;, &#x27;Lpez&#x27;, &#x27;555-1003&#x27;, &#x27;carmen.lopez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 3);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;199072412&#x27;, &#x27;Luis&#x27;, &#x27;Martnez&#x27;, &#x27;555-1004&#x27;, &#x27;luis.martinez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 4);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;151205682&#x27;, &#x27;Ana&#x27;, &#x27;Garca&#x27;, &#x27;555-1005&#x27;, &#x27;ana.garcia@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 5);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;195174571&#x27;, &#x27;Juan&#x27;, &#x27;Snchez&#x27;, &#x27;555-1006&#x27;, &#x27;juan.sanchez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 1);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;116726459&#x27;, &#x27;Laura&#x27;, &#x27;Prez&#x27;, &#x27;555-1007&#x27;, &#x27;laura.perez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 2);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;170401697&#x27;, &#x27;Carlos&#x27;, &#x27;Torres&#x27;, &#x27;555-1008&#x27;, &#x27;carlos.torres@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 3);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;171939747&#x27;, &#x27;Isabel&#x27;, &#x27;Ramrez&#x27;, &#x27;555-1009&#x27;, &#x27;isabel.ramirez@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 4);
INSERT INTO FUN_FUNCIONARIO (rut, nombres, apellidos, telefono, email, password, esp_id) VALUES (&#x27;198848395&#x27;, &#x27;Miguel&#x27;, &#x27;Flores&#x27;, &#x27;555-1010&#x27;, &#x27;miguel.flores@ejemplo.com&#x27;, &#x27;Abc123&#x27;, 5);

INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;111111111&#x27;, &#x27;Diego&#x27;, &#x27;Castro&#x27;, &#x27;555-2001&#x27;, &#x27;diego.castro@ejemplo.com&#x27;, &#x27;1990-05-14&#x27;, &#x27;M&#x27;, &#x27;Calle Principal 123&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;222222222&#x27;, &#x27;Luca&#x27;, &#x27;Morales&#x27;, &#x27;555-2002&#x27;, &#x27;lucia.morales@ejemplo.com&#x27;, &#x27;1985-08-23&#x27;, &#x27;F&#x27;, &#x27;Avenida Secundaria 456&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;333333333&#x27;, &#x27;Antonio&#x27;, &#x27;Vargas&#x27;, &#x27;555-2003&#x27;, &#x27;antonio.vargas@ejemplo.com&#x27;, &#x27;1978-12-02&#x27;, &#x27;M&#x27;, &#x27;Calle Tercera 789&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;444444444&#x27;, &#x27;Sofa&#x27;, &#x27;Ortega&#x27;, &#x27;555-2004&#x27;, &#x27;sofia.ortega@ejemplo.com&#x27;, &#x27;1992-07-19&#x27;, &#x27;F&#x27;, &#x27;Avenida Cuarta 321&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;555555555&#x27;, &#x27;Pedro&#x27;, &#x27;Ramos&#x27;, &#x27;555-2005&#x27;, &#x27;pedro.ramos@ejemplo.com&#x27;, &#x27;1980-03-11&#x27;, &#x27;M&#x27;, &#x27;Calle Quinta 654&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;666666666&#x27;, &#x27;Valentina&#x27;, &#x27;Mendoza&#x27;, &#x27;555-2006&#x27;, &#x27;valentina.mendoza@ejemplo.com&#x27;, &#x27;1995-09-30&#x27;, &#x27;F&#x27;, &#x27;Avenida Sexta 987&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;777777777&#x27;, &#x27;Andrs&#x27;, &#x27;Silva&#x27;, &#x27;555-2007&#x27;, &#x27;andres.silva@ejemplo.com&#x27;, &#x27;1975-11-05&#x27;, &#x27;M&#x27;, &#x27;Calle Sptima 159&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;888888888&#x27;, &#x27;Elena&#x27;, &#x27;Santos&#x27;, &#x27;555-2008&#x27;, &#x27;elena.santos@ejemplo.com&#x27;, &#x27;1988-04-22&#x27;, &#x27;F&#x27;, &#x27;Avenida Octava 753&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;999999999&#x27;, &#x27;Jorge&#x27;, &#x27;Cruz&#x27;, &#x27;555-2009&#x27;, &#x27;jorge.cruz@ejemplo.com&#x27;, &#x27;1993-06-17&#x27;, &#x27;M&#x27;, &#x27;Calle Novena 852&#x27;);
INSERT INTO PAC_PACIENTE (rut, nombres, apellidos, telefono, email, fecha_nacimiento, genero, direccion) VALUES (&#x27;101010101&#x27;, &#x27;Camila&#x27;, &#x27;Reyes&#x27;, &#x27;555-2010&#x27;, &#x27;camila.reyes@ejemplo.com&#x27;, &#x27;1991-01-28&#x27;, &#x27;F&#x27;, &#x27;Avenida Dcima 951&#x27;);

-- Seed Segmentos Horarios for this week (Nov 24-30 2024)
INSERT INTO SGH_SEGMENTO_HORARIO (nombre, fecha_hora_inicio, fecha_hora_fin, fun_id, free) 
VALUES 
-- Monday Nov 25
(&#x27;Atencin general&#x27;, &#x27;2024-11-25 09:00:00&#x27;, &#x27;2024-11-25 12:00:00&#x27;, 1, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-25 14:00:00&#x27;, &#x27;2024-11-25 17:00:00&#x27;, 1, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-25 15:00:00&#x27;, &#x27;2024-11-25 18:00:00&#x27;, 3, true),

-- Tuesday Nov 26
(&#x27;Atencin general&#x27;, &#x27;2024-11-26 08:00:00&#x27;, &#x27;2024-11-26 12:00:00&#x27;, 4, true),

-- Wednesday Nov 27
(&#x27;Atencin general&#x27;, &#x27;2024-11-27 09:00:00&#x27;, &#x27;2024-11-27 12:00:00&#x27;, 8, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-27 14:00:00&#x27;, &#x27;2024-11-27 17:00:00&#x27;, 9, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-27 15:00:00&#x27;, &#x27;2024-11-27 18:00:00&#x27;, 1, true),

-- Thursday Nov 28
(&#x27;Atencin general&#x27;, &#x27;2024-11-28 14:00:00&#x27;, &#x27;2024-11-28 18:00:00&#x27;, 3, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-28 08:00:00&#x27;, &#x27;2024-11-28 12:00:00&#x27;, 4, true),

-- Friday Nov 29
(&#x27;Atencin general&#x27;, &#x27;2024-11-29 08:00:00&#x27;, &#x27;2024-11-29 12:00:00&#x27;, 8, true),
(&#x27;Atencin general&#x27;, &#x27;2024-11-29 15:00:00&#x27;, &#x27;2024-11-29 18:00:00&#x27;, 9, true);
    &#x60;;
    this.db.run(script);
  }

  /**
   * Inicializa los roles por defecto en la base de datos
   * @description Crea los roles: USA_CITAS, USA_AGENDA, USA_INSCRIPCION
   * @private
   */
  private seedRoles(): void {
    const roles &#x3D; [
      &#x27;USA_CITAS&#x27;,
      &#x27;USA_AGENDA&#x27;,
      &#x27;USA_INSCRIPCION&#x27;
    ];

    roles.forEach(rol &#x3D;&gt; {
      try {
        this.db.run(&#x27;INSERT OR IGNORE INTO ROL_ROLES (nombre) VALUES (?)&#x27;, [rol]);
      } catch (error) {
        console.error(&#x60;Error seeding role ${rol}:&#x60;, error);
      }
    });
    this.db.run(&#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (1, 1)&#x27;);
    this.db.run(&#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (2, 1)&#x27;);
    this.db.run(&#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (3, 1)&#x27;);
    for (let i &#x3D; 2; i &lt;&#x3D; 10; i++) {
      this.db.run(&#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (?, ?)&#x27;, [2, i]);
      this.db.run(&#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (?, ?)&#x27;, [3, i]);
    }
  }

  /**
   * Carga todas las especialidades desde la base de datos
   * @description Actualiza el especialidadesSubject con los datos ms recientes
   */
  public loadEspecialidades(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM ESP_ESPECIALIDAD&#x27;);
    if (result.length &gt; 0) {
      this.especialidadesSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombre: row[1]
      })));
    } else {
      this.especialidadesSubject.next([]);
    }
  }

  public loadFuncionarios(): void {
    const result &#x3D; this.db.exec(&#x60;
      SELECT FUN_FUNCIONARIO.*, ESP_ESPECIALIDAD.nombre AS especialidad
      FROM FUN_FUNCIONARIO
      LEFT JOIN ESP_ESPECIALIDAD ON FUN_FUNCIONARIO.esp_id &#x3D; ESP_ESPECIALIDAD.id
    &#x60;);
    if (result.length &gt; 0) {
      this.funcionariosSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombres: row[1],
        apellidos: row[2],
        rut: row[3],
        telefono: row[4],
        email: row[5],
        especialidad: row[8]
      })));
    }
  }

  public loadPacientes(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM PAC_PACIENTE&#x27;);
    if (result.length &gt; 0) {
      const pacientes &#x3D; result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombres: row[1],
        apellidos: row[2],
        rut: row[3],
        telefono: row[4],
        email: row[5],
        fecha_nacimiento: row[6],
        genero: row[7],
        direccion: row[8]
      }));
      this.pacientesSubject.next(pacientes);
    } else {
      this.pacientesSubject.next([]);
    }
  }

  public loadSegmentosHorario(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM SGH_SEGMENTO_HORARIO&#x27;);
    if (result.length &gt; 0) {
      this.segmentosHorarioSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombre: row[1],
      })));
    }
  }

  public loadCupos(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM CUP_CUPO&#x27;);
    if (result.length &gt; 0) {
      this.cuposSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        estado: row[1],
      })));
    }
  }

  public loadCitas(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM CIT_CITA&#x27;);
    if (result.length &gt; 0) {
      this.citasSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        cup_id: row[1],
        pac_id: row[2],
      })));
    }
  }

  public loadRoles(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM ROL_ROLES&#x27;);
    if (result.length &gt; 0) {
      this.rolesSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombre: row[1]
      })));
    }
  }

  public loadRolesFuncionario(): void {
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM RL_ROL_FUN&#x27;);
    if (result.length &gt; 0) {
      this.rolesFuncionarioSubject.next(result[0].values.map((row: any) &#x3D;&gt; ({
        rol_id: row[0],
        fun_id: row[1]
      })));
    }
  }

  public tryLogin(email: string, password: string): boolean {
    const result &#x3D; this.db.exec(&#x60;SELECT * FROM FUN_FUNCIONARIO WHERE email &#x3D; ? AND password &#x3D; ?&#x60;, [email, password]);
    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0;
  }

  public getFuncionarioByName(name: string): Funcionario | null {
    const result &#x3D; this.db.exec(&#x60;
      SELECT FUN_FUNCIONARIO.*, ESP_ESPECIALIDAD.nombre AS especialidad
      FROM FUN_FUNCIONARIO
      LEFT JOIN ESP_ESPECIALIDAD ON FUN_FUNCIONARIO.esp_id &#x3D; ESP_ESPECIALIDAD.id
      WHERE nombres LIKE ? OR apellidos LIKE ?&#x60;, [&#x60;%${name}%&#x60;, &#x60;%${name}%&#x60;]);
    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? result[0].values[0] : null;
  }

  public getFuncionarioById(id: number): Funcionario | null {
    console.log(&quot;### -- 1&quot;);
    const result &#x3D; this.db.exec(&#x60;
      SELECT FUN_FUNCIONARIO.*, ESP_ESPECIALIDAD.nombre AS especialidad
      FROM FUN_FUNCIONARIO
      LEFT JOIN ESP_ESPECIALIDAD ON FUN_FUNCIONARIO.esp_id &#x3D; ESP_ESPECIALIDAD.id
      WHERE FUN_FUNCIONARIO.id &#x3D; ?&#x60;, [id]);
    console.log(&quot;### -- 2&quot;);
    const funcionario: Funcionario | null &#x3D; result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? result[0].values[0] : null;
    console.log(&quot;### -- 3 funcionario&quot;, funcionario);
    return funcionario;
  }

  public getFuncionarioByEmail(email: string): Funcionario | null {
    const result &#x3D; this.db.exec(&#x60;
      SELECT FUN_FUNCIONARIO.*, ESP_ESPECIALIDAD.nombre AS especialidad
      FROM FUN_FUNCIONARIO
      LEFT JOIN ESP_ESPECIALIDAD ON FUN_FUNCIONARIO.esp_id &#x3D; ESP_ESPECIALIDAD.id
      WHERE email &#x3D; ?&#x60;, [email]);
    const funcionario: Funcionario | null &#x3D; result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? result[0].values[0] : null;
    return funcionario;
  }

  /**
   * Agrega un nuevo funcionario a la base de datos
   * @param funcionario Objeto funcionario a agregar
   * @description Tambin asigna roles por defecto al nuevo funcionario
   */
  public addFuncionario(funcionario: Funcionario): void {
    this.db.run(&#x60;
      INSERT INTO FUN_FUNCIONARIO (nombres, apellidos, rut, telefono, email, password, esp_id) 
      VALUES (?, ?, ?, ?, ?, ?, ?)&#x60;,
      [
        funcionario.nombres,
        funcionario.apellidos,
        funcionario.rut,
        funcionario.telefono,
        funcionario.email,
        funcionario.password,
        funcionario.esp_id
      ]
    );

    const result &#x3D; this.db.exec(&#x60;
      SELECT id FROM FUN_FUNCIONARIO 
      WHERE rut &#x3D; ?&#x60;, 
      [funcionario.rut]
    );

    if (result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0) {
      const funId &#x3D; result[0].values[0][0];
      
      this.db.run(&#x27;INSERT INTO RL_ROL_FUN (rol_id, fun_id) VALUES (1, ?)&#x27;, [funId]);
      this.db.run(&#x27;INSERT INTO RL_ROL_FUN (rol_id, fun_id) VALUES (2, ?)&#x27;, [funId]);
      this.db.run(&#x27;INSERT INTO RL_ROL_FUN (rol_id, fun_id) VALUES (3, ?)&#x27;, [funId]);
    }

    this.loadFuncionarios();
    this.loadRolesFuncionario();
  }

  // Hack temporal
  nuevosPacientes: Paciente[] &#x3D; [];
  public addPaciente(paciente: Paciente): void {
    // First, check if patient already exists
    const existingPaciente &#x3D; this.getPacienteByRut(paciente.rut);
    if (existingPaciente) {
      throw new Error(&#x27;Paciente ya existe&#x27;);
    }

    // Add new patient
    this.db.run(
      &#x60;INSERT INTO PAC_PACIENTE (nombres, apellidos, rut, telefono, email, fecha_nacimiento, genero, direccion) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?)&#x60;, 
      [
        paciente.nombres,
        paciente.apellidos,
        paciente.rut.replace(/\./g, &#x27;&#x27;).replace(&#x27;-&#x27;, &#x27;&#x27;),
        paciente.telefono,
        paciente.email,
        paciente.fecha_nacimiento,
        paciente.genero,
        paciente.direccion
      ]
    );

    // Force a fresh load of all patients
    const result &#x3D; this.db.exec(&#x27;SELECT * FROM PAC_PACIENTE&#x27;);
    if (result.length &gt; 0) {
      const pacientes &#x3D; result[0].values.map((row: any) &#x3D;&gt; ({
        id: row[0],
        nombres: row[1],
        apellidos: row[2],
        rut: row[3],
        telefono: row[4],
        email: row[5],
        fecha_nacimiento: row[6],
        genero: row[7],
        direccion: row[8]
      }));
      this.pacientesSubject.next(pacientes);
    }
    // Temporary hack
    paciente.id &#x3D; this.nuevosPacientes.length + 11;
    this.nuevosPacientes.push(paciente);
  }

  /**
   * Obtiene un paciente por su RUT
   * @param rut RUT del paciente (sin puntos ni guin)
   * @returns Paciente si se encuentra, null si no existe
   */
  public getPacienteByRut(rut: string): Paciente | null {
    rut &#x3D; rut.replace(/\./g, &#x27;&#x27;).replace(&#x27;-&#x27;, &#x27;&#x27;);
    const paciente &#x3D; this.nuevosPacientes.find(p &#x3D;&gt; p.rut &#x3D;&#x3D;&#x3D; rut);
    if (paciente) {
      return paciente;
    }
    const result &#x3D; this.db.exec(&#x60;SELECT * FROM PAC_PACIENTE WHERE rut &#x3D; ?&#x60;, [rut]);
    if (result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0) {
      const row &#x3D; result[0].values[0];
      return {
        id: row[0],
        nombres: row[1],
        apellidos: row[2],
        rut: row[3],
        telefono: row[4],
        email: row[5],
        fecha_nacimiento: row[6],
        genero: row[7],
        direccion: row[8]
      } as Paciente;
    }
    return null;
  }

  public addSegmentoHorario(segmentoHorario: SegmentoHorario): void {
    if (!segmentoHorario.nombre || !segmentoHorario.fecha_hora_inicio || !segmentoHorario.fecha_hora_fin || !segmentoHorario.fun_id) {
      return;
    }
    this.db.run(&#x60;INSERT INTO SGH_SEGMENTO_HORARIO (nombre, fecha_hora_inicio, fecha_hora_fin, fun_id, free) VALUES (?, ?, ?, ?, ?)&#x60;, [segmentoHorario.nombre, segmentoHorario.fecha_hora_inicio, segmentoHorario.fecha_hora_fin, segmentoHorario.fun_id, segmentoHorario.free]);
    const result &#x3D; this.db.exec(&#x60;SELECT id FROM SGH_SEGMENTO_HORARIO WHERE nombre &#x3D; ? AND fecha_hora_inicio &#x3D; ? AND fecha_hora_fin &#x3D; ? AND fun_id &#x3D; ?&#x60;, [segmentoHorario.nombre, segmentoHorario.fecha_hora_inicio, segmentoHorario.fecha_hora_fin, segmentoHorario.fun_id]);
    const id &#x3D; result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? result[0].values[0][0] : null;
    const duration &#x3D; (new Date(segmentoHorario.fecha_hora_fin).getTime() - new Date(segmentoHorario.fecha_hora_inicio).getTime()) / (30*60000);
    for (let i &#x3D; 0; i &lt; duration; i++) {
      this.db.run(&#x60;INSERT INTO CUP_CUPO (estado, fecha_hora_inicio, fecha_hora_fin, duracion, sgh_id) VALUES (?, ?, ?, ?, ?)&#x60;, [&#x27;Disponible&#x27;, segmentoHorario.fecha_hora_inicio, segmentoHorario.fecha_hora_fin, duration, id]);
    }
    this.loadSegmentosHorario();
  }

  public getSegmentosHorarioByFuncionarioId(funcionarioId: number): SegmentoHorario[] {
    const result &#x3D; this.db.exec(&#x60;SELECT * FROM SGH_SEGMENTO_HORARIO WHERE fun_id &#x3D; ?&#x60;, [funcionarioId]);
    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? result[0].values.map((row: any) &#x3D;&gt; ({
      id: row[0],
      nombre: row[1],
      fecha_hora_inicio: row[2],
      fecha_hora_fin: row[3],
      fun_id: row[4],
      free: row[5]
    })) : [];
  }

  public deleteSegmentoHorario(id: number): void {
    this.db.run(&#x60;DELETE FROM SGH_SEGMENTO_HORARIO WHERE id &#x3D; ?&#x60;, [id]);
    this.loadSegmentosHorario();
  }

  public getSegmentoHorarioById(id: number): SegmentoHorario | null {
    const result &#x3D; this.db.exec(&#x60;SELECT * FROM SGH_SEGMENTO_HORARIO WHERE id &#x3D; ?&#x60;, [id]);
    if (result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0) {
      const row &#x3D; result[0].values[0];
      return {
        id: row[0],
        nombre: row[1],
        fecha_hora_inicio: row[2],
        fecha_hora_fin: row[3],
        fun_id: row[4],
        free: row[5]
      } as SegmentoHorario;
    }
    return null;
  }

  public updateSegmentoHorario(segmentoHorario: SegmentoHorario): void {
    if (!segmentoHorario.nombre || !segmentoHorario.fecha_hora_inicio || !segmentoHorario.fecha_hora_fin || !segmentoHorario.id) {
      return;
    }
    this.db.run(&#x60;
      UPDATE SGH_SEGMENTO_HORARIO 
      SET nombre &#x3D; ?, fecha_hora_inicio &#x3D; ?, fecha_hora_fin &#x3D; ?, free &#x3D; ?
      WHERE id &#x3D; ?
    &#x60;, [
      segmentoHorario.nombre,
      segmentoHorario.fecha_hora_inicio,
      segmentoHorario.fecha_hora_fin,
      segmentoHorario.id,
      segmentoHorario.free
    ]);

    const duration &#x3D; (new Date(segmentoHorario.fecha_hora_fin).getTime() - new Date(segmentoHorario.fecha_hora_inicio).getTime()) / (30*60000);
    
    this.db.run(&#x60;DELETE FROM CUP_CUPO WHERE sgh_id &#x3D; ?&#x60;, [segmentoHorario.id]);

    for (let i &#x3D; 0; i &lt; duration; i++) {
      const cupoStart &#x3D; new Date(segmentoHorario.fecha_hora_inicio);
      cupoStart.setMinutes(cupoStart.getMinutes() + (i * 30));
      const cupoEnd &#x3D; new Date(cupoStart);
      cupoEnd.setMinutes(cupoEnd.getMinutes() + 30);

      this.db.run(&#x60;
        INSERT INTO CUP_CUPO (estado, fecha_hora_inicio, fecha_hora_fin, duracion, sgh_id) 
        VALUES (?, ?, ?, ?, ?)
      &#x60;, [
        &#x27;Disponible&#x27;,
        cupoStart.toISOString(),
        cupoEnd.toISOString(),
        30,
        segmentoHorario.id
      ]);
    }

    this.loadSegmentosHorario();
  }
  public deleteFuncionario(id: number): void {
    this.db.run(&#x60;DELETE FROM FUN_FUNCIONARIO WHERE id &#x3D; ?&#x60;, [id]);
    this.loadFuncionarios();
  }

  public assignRolToFuncionario(rolId: number, funId: number): void {
    this.db.run(
      &#x27;INSERT OR IGNORE INTO RL_ROL_FUN (rol_id, fun_id) VALUES (?, ?)&#x27;,
      [rolId, funId]
    );
    this.loadRolesFuncionario();
  }

  public removeRolFromFuncionario(rolId: number, funId: number): void {
    this.db.run(
      &#x27;DELETE FROM RL_ROL_FUN WHERE rol_id &#x3D; ? AND fun_id &#x3D; ?&#x27;,
      [rolId, funId]
    );
    this.loadRolesFuncionario();
  }

  public getFuncionarioRoles(funId: number): string[] {
    const result &#x3D; this.db.exec(&#x60;
      SELECT r.nombre 
      FROM ROL_ROLES r 
      JOIN RL_ROL_FUN rf ON r.id &#x3D; rf.rol_id 
      WHERE rf.fun_id &#x3D; ?
    &#x60;, [funId]);

    return result.length &gt; 0 ? result[0].values.map((row: any) &#x3D;&gt; row[0]) : [];
  }

  /**
   * Verifica si un funcionario tiene un rol especfico
   * @param funId ID del funcionario
   * @param rolNombre Nombre del rol a verificar
   * @returns boolean indicando si el funcionario tiene el rol
   */
  public hasRole(funId: number, rolNombre: string): boolean {
    const result &#x3D; this.db.exec(&#x60;
      SELECT 1 
      FROM ROL_ROLES r 
      JOIN RL_ROL_FUN rf ON r.id &#x3D; rf.rol_id 
      WHERE rf.fun_id &#x3D; ? AND r.nombre &#x3D; ?
    &#x60;, [funId, rolNombre]);

    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0;
  }

  /**
   * Obtiene un funcionario por su RUT
   * @param rut RUT del funcionario (sin puntos ni guin)
   * @returns Funcionario si se encuentra, null si no existe
   */
  public getFuncionarioByRut(rut: string): Funcionario | null {
    const result &#x3D; this.db.exec(&#x60;
      SELECT FUN_FUNCIONARIO.*, ESP_ESPECIALIDAD.nombre AS especialidad
      FROM FUN_FUNCIONARIO
      LEFT JOIN ESP_ESPECIALIDAD ON FUN_FUNCIONARIO.esp_id &#x3D; ESP_ESPECIALIDAD.id
      WHERE rut &#x3D; ?&#x60;, [rut.replace(/\./g, &#x27;&#x27;).replace(&#x27;-&#x27;, &#x27;&#x27;)]);
    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? {
      id: result[0].values[0][0],
      nombres: result[0].values[0][1],
      apellidos: result[0].values[0][2],
      rut: result[0].values[0][3],
      telefono: result[0].values[0][4],
      email: result[0].values[0][5],
      password: result[0].values[0][6],
      esp_id: result[0].values[0][7],
      especialidad: result[0].values[0][8]
    } as Funcionario : null;
  }

  /**
   * Asigna un segmento horario a un paciente
   * @param pacId ID del paciente
   * @param sghId ID del segmento horario
   * @description Marca el segmento como no disponible y crea una cita
   */
  public assignSegmentoToPaciente(pacId: number, sghId: number): void {
    this.db.run(&#x27;UPDATE SGH_SEGMENTO_HORARIO SET free &#x3D; 0 WHERE id &#x3D; ?&#x27;, [sghId]);
    this.db.run(&#x27;INSERT INTO CIT_CITA (pac_id, cup_id) VALUES (?, ?)&#x27;, [pacId, sghId]);
    this.loadCitas();
    this.loadSegmentosHorario();
  }

  public updateFuncionarioPassword(id: number, newPassword: string): void {
    this.db.run(
      &#x27;UPDATE FUN_FUNCIONARIO SET password &#x3D; ? WHERE id &#x3D; ?&#x27;,
      [newPassword, id]
    );
  }

  public getEspecialidadByName(nombre: string): Especialidad | null {
    const result &#x3D; this.db.exec(&#x60;SELECT * FROM ESP_ESPECIALIDAD WHERE nombre &#x3D; ?&#x60;, [nombre]);
    return result.length &gt; 0 &amp;&amp; result[0].values.length &gt; 0 ? {
      id: result[0].values[0][0],
      nombre: result[0].values[0][1]
    } as Especialidad : null;
  }

  public updateFuncionario(funcionario: Funcionario): void {
    console.log(&quot;### updateFuncionario&quot;, funcionario);
    if (funcionario.especialidad &amp;&amp; !funcionario.esp_id) {
      const especialidad &#x3D; this.getEspecialidadByName(funcionario.especialidad);
      if (especialidad) {
        funcionario.esp_id &#x3D; especialidad.id;
      }
    }
    const oldFuncionario &#x3D; this.getFuncionarioById(funcionario.id);
    console.log(&quot;### 1&quot;);
    const updateFields: (keyof Funcionario)[] &#x3D; [&#x27;nombres&#x27;, &#x27;apellidos&#x27;, &#x27;email&#x27;, &#x27;telefono&#x27;, &#x27;esp_id&#x27;, &#x27;rut&#x27;, &#x27;password&#x27;];
    console.log(&quot;### 2&quot;);
    const values &#x3D; updateFields.map(field &#x3D;&gt; funcionario[field]);
    console.log(&quot;### 3&quot;);
    const newFuncionario &#x3D; {
      ...oldFuncionario,
      ...funcionario
    };
    console.log(&quot;### 4&quot;);
    // let sql &#x3D; &#x60;
    //   UPDATE FUN_FUNCIONARIO 
    //   SET nombres &#x3D; ?, apellidos &#x3D; ?, email &#x3D; ?, telefono &#x3D; ?, esp_id &#x3D; ?, rut &#x3D; ?, password &#x3D; ?
    // &#x60;;
    let sql &#x3D; &#x60;
      UPDATE FUN_FUNCIONARIO 
      SET nombres &#x3D; &#x27;${funcionario.nombres}&#x27;, apellidos &#x3D; &#x27;${funcionario.apellidos}&#x27;, email &#x3D; &#x27;${funcionario.email}&#x27;, telefono &#x3D; &#x27;${funcionario.telefono}&#x27;, esp_id &#x3D; ${funcionario.esp_id}, rut &#x3D; &#x27;${funcionario.rut}&#x27;
    &#x60;;
    if (newFuncionario.password &amp;&amp; newFuncionario.password.length &gt; 0) {
      sql +&#x3D; &#x60;, password &#x3D; &#x27;${newFuncionario.password}&#x27;&#x60;;
      values.push(newFuncionario.password);
    } else {
      sql +&#x3D; &#x60;, password &#x3D; &#x27;${oldFuncionario ? oldFuncionario.password : &#x27;&#x27;}&#x27;&#x60;;
      values.push(oldFuncionario ? oldFuncionario.password : &#x27;&#x27;);
    }
    console.log(&quot;### 6&quot;);
    sql +&#x3D; &#x60; WHERE id &#x3D; ?&#x60;;
    values.push(funcionario.id);
    console.log(&quot;### 7&quot;);
    console.log(&quot;### sql&quot;, sql);
    console.log(&quot;### values&quot;, values);
    this.loadFuncionarios();
    this.db.run(sql);
    // this.db.run(sql, values);
    console.log(&quot;### 8&quot;);
    this.loadFuncionarios();
  }
}

/**
 * Interfaz que representa una especialidad mdica
 */
export interface Especialidad {
  id: number;
  nombre: string;
}

/**
 * Interfaz que representa un funcionario del hospital
 */
export interface Funcionario {
  id: number;
  nombres: string;
  apellidos: string;
  rut: string;
  telefono: string;
  email: string;
  password: string;
  esp_id: number;
  especialidad?: string; // Solo para UI
}

/**
 * Interfaz que representa un paciente
 */
export interface Paciente {
  id: number;
  nombres: string;
  apellidos: string;
  rut: string;
  telefono: string;
  email: string;
  fecha_nacimiento: string;
  genero: string;
  direccion: string;
}

/**
 * Interfaz que representa un segmento horario de atencin
 */
export interface SegmentoHorario {
  id: number;
  nombre: string;
  fecha_hora_inicio: string;
  fecha_hora_fin: string;
  fun_id: number;
  free: boolean;
}

/**
 * Enum que representa el estado de un cupo
 */
enum Estado {
  DISPONIBLE &#x3D; &#x27;0&#x27;,
  OCUPADO &#x3D; &#x27;1&#x27;
}

/**
 * Interfaz que representa un cupo de atencin
 */
export interface Cupo {
  id: number;
  estado: Estado;
  fecha_hora_inicio: string;
  fecha_hora_fin: string;
  duracion: number; // En minutos
}

/**
 * Interfaz que representa una cita mdica
 */
export interface Cita {
  id: number;
  cup_id: number;
  pac_id: number;
}

/**
 * Interfaz que representa un rol de usuario
 */
export interface Rol {
  id: number;
  nombre: string;
}

/**
 * Interfaz que representa la relacin entre un rol y un funcionario
 */
export interface RolFuncionario {
  rol_id: number;
  fun_id: number;
}</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DatabaseService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
